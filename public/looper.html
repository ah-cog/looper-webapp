<!DOCTYPE html>
<html>

<head>
    <title>Looper</title>

    <script src="/javascripts/processing.js"></script>
    <meta name="viewport" content="user-scalable=no, width=device-width, initial-scale=1, maximum-scale=1">

    <link href='http://fonts.googleapis.com/css?family=Didact+Gothic' rel='stylesheet' type='text/css'>

    <link rel="stylesheet" href="/stylesheets/style.css" />

    <head profile="http://www.w3.org/2005/10/profile">
    <link rel="icon" type="image/png" href="/favicon.png">
</head>

<body>

    <!-- NOTE: Hammer.js works without jQuery! -->
    <!-- <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script> -->
    <script src="/javascripts/jquery-1.9.1.min.js"></script>
    <script src="/javascripts/modernizr.js"></script>

    <!--<div id="debug">Log</div>-->

    <!-- Set up carousel -->
    <div id="carousel">
        <ul id="panes">

            <li class="pane1">
                <canvas id="looperCanvas" style="width: 100%; height: 100%;"></canvas>
            </li>

        </ul>
    </div>

    <!-- Include Hammer.js (for gesture recognition) -->
    <script src="/javascripts/jquery.hammer.min.js"></script>
    <script>

    /*
    var debug_el = $("#debug");
    function debug(text) {
        debug_el.text(text);
    }
    */

    /**
     * requestAnimationFrame and cancel polyfill
     */
    (function() {
        var lastTime = 0;
        var vendors = ['ms', 'moz', 'webkit', 'o'];
        for(var x = 0; x < vendors.length && !window.requestAnimationFrame; ++x) {
            window.requestAnimationFrame = window[vendors[x]+'RequestAnimationFrame'];
            window.cancelAnimationFrame =
                    window[vendors[x]+'CancelAnimationFrame'] || window[vendors[x]+'CancelRequestAnimationFrame'];
        }

        if (!window.requestAnimationFrame)
            window.requestAnimationFrame = function(callback, element) {
                var currTime = new Date().getTime();
                var timeToCall = Math.max(0, 16 - (currTime - lastTime));
                var id = window.setTimeout(function() { callback(currTime + timeToCall); },
                        timeToCall);
                lastTime = currTime + timeToCall;
                return id;
            };

        if (!window.cancelAnimationFrame)
            window.cancelAnimationFrame = function(id) {
                clearTimeout(id);
            };
    }());

    </script>

    <!-- Include Processing.js -->
    <script type="application/processing" data-processing-target="looperCanvas">
    /*
    @pjs
    crisp=true;
    font="/DidactGothic.ttf";
    */
    PFont primaryFont;

    void setup() {
        size(screenWidth, screenHeight);

        primaryFont = loadFont("/DidactGothic.ttf");
    }

    void draw() {
        background(#ffffff); // background(#F0F1F0);
        primaryFont = createFont("/DidactGothic.ttf", 32);
        textFont(primaryFont, 100);
        textAlign(CENTER);
        fill(65, 65, 65);
        text("pixel", screenWidth / 2, screenHeight / 2 + 20);
    }
    </script>

    <script src="/javascripts/pixel.js"></script>
    <script src="/javascripts/looper.js"></script>
    <script>
    looper = new Looper();
    looper.addDevice({ address: "192.168.1.15" });
    looper.showDeviceByIndex(0);
    erase();
    </script>

</body>
</html>